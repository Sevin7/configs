------------------------
CHRIS' MAXQUALITY CONFIG
------------------------

// Unexplained crashes? Try changing mat_queue_mode to `-1'.
// ----------------------------------------------------------------------------
// Chris' maxquality config, designed to get you excellent quality
// v2.007 | 26 August 2012 | fakkelbrigade.eu/chris/configs/
// ----------------------------------------------------------------------------
// Problems or questions? Contact me at #christf2 on QuakeNet.
// ----------------------------------------------------------------------------
// Launch options:
// IMPORTANT: Remove -dxlevel 98 from the launch options after the first launch!
//
// Fullscreen: -dxlevel 98 -full -w WIDTH -h HEIGHT -console -novid -useforcedmparms -noforcemaccel -noforcemspd
// Windowed:   -dxlevel 98 -sw -w WIDTH -h HEIGHT -console -noborder -novid -useforcedmparms -noforcemaccel -noforcemspd
// ----------------------------------------------------------------------------

// ----------------------------------------------------------------------------
// FPS cap
// ----------------------------------------------------------------------------
// The primary benefit of an FPS cap is to make the FPS more stable, other than
// that, it doesn't do a lot. A moderate, consistent framerate is much more
// desirable than a variable but sometimes high framerate. A common
// misconception is that if any more frames are generated than your monitor can
// display, they are useless. This is wrong -- frames are used for much more
// than mere display, and affect the way the game feels well past your
// refresh rate.
//
// This FPS cap should *always* be set to a value higher than `cl_cmdrate' in
// any case, or the discrepancy between clientside frame generation and frames
// to be sent to the server will no doubt cause you many a headache, especially
// when it comes down to hit registration. Other than that, I recommend
// for everyone to use the value `132' (2*66), as long as you can generally
// keep that value stable without regular drops.
// ----------------------------------------------------------------------------
cl_showfps 0 // Don't show FPS meter
fps_max 300 // Commented due to 2011-09-02 update causing jittering when fps is capped for some
//fps_max 0

// *** STILL UNDER DEVELOPMENT ***

// Everything you need to know about network settings, straight from the source (hue)
// https://developer.valvesoftware.com/wiki/Source_Multiplayer_Networking
// https://developer.valvesoftware.com/wiki/TF2_cvarlist
// CFG by: athairus

// THE FORMAT:

// "Valve documentation"
// My comments

//
// Server to client data
//

// "Number of packets per second of updates you are requesting from the server"
// By default this is 20, the highest you can go is the hard-coded server tickrate, 66
// If the server wants to send a packet to you but lacks the bandwidth, that missed packet will show up in the choke counter
// Choke is bad. Lower your cl_updaterate if it's ever non-zero
cl_updaterate 66

// Place net_66 in your main config file
// If the server you're playing on chokes, try a lower one
alias net_66 "cl_updaterate 66; cl_cmdrate 66; alias net_hitscan net_hitscan_66; alias net_projectile net_projectile_66"
alias net_40 "cl_updaterate 40; cl_cmdrate 40; alias net_hitscan net_hitscan_40; alias net_projectile net_projectile_40"
alias net_33 "cl_updaterate 33; cl_cmdrate 33; alias net_hitscan net_hitscan_33; alias net_projectile net_projectile_33"
alias net_20 "cl_updaterate 20; cl_cmdrate 20; alias net_hitscan net_hitscan_20; alias net_projectile net_projectile_20" // default

// "Max bytes/sec the host can receive data"
// ~100KB/s, totally overkill as I usually see ~20-30KB/s max
// Nothing wrong with overkill here!
rate "100000"

//
// Client to server data
//

// "Max number of command packets sent to server per second"
// By default, the max amount the server will let you send is 66
cl_cmdrate 66

//
// Client prediction (your guy)
//

// "Perform client side prediction."
// Predict what your inputs will do to the server's simulation, from the client side.
// Default 1 (on). You'd be insane to turn this off. It'd delay your inputs by dozens of ms with no benefit
cl_predict 1

// "Optimize for not copying data if didn't receive a network update (1), and also for not repredicting if there were no errors (2)."
// This should never be changed, default is as good as it gets
cl_pred_optimize 2 

// "Perform server side lag compensation of weapon firing events."
// Tell the server to compensate for the fact your inputs do not reach the server instantly (based on your ping),
// pretty much mandatory unless you like leading your shots...
cl_lagcompensation 1 

// "Smooth view/eye origin after prediction errors | Smooth client's view after prediction error over this many seconds"
// Prediction error smoothing: when your client doesn't have the correct picture of what's going on 
// with your character's position on the server simulation (as the server always has the final say), 
// smoothly move your character over cl_smoothtime seconds to its rightful place.
cl_smooth 1
cl_smoothtime 0.1

//
// Client entity interpolation (everyone else on your screen)
//

// Buffer the snapshots received from the server by (lerp) seconds, interpolating between snapshots whenever it's time for the renderer to render.
// Default server configuration limits setting this to between 1 to 5 ticks (15ms to 75ms).
// Note that cl_interp is only clamped at the _lower_ bound by sv_client_XXX_interp_ratio

// You get two ways to set it: explicitly or as a function of the tick rate.
// The final value aka "lerp" = max( cl_interp, cl_interp_ratio / cl_updaterate (=66) ).
// You can think of the interpolation buffer (lerp) length as additional time added to your ping.
// It's in your best interest to keep lerp as low as possible.

// lerp corrects packet loss
// The lerp buffer will interpolate across two packets if a packet in the middle that should be there is missing
// Packet loss is serious. If you're losing packets regularly, play on another server or call your ISP because something's up...

// lerp corrects jitter
// When packets come to your client later than they should, their position in the lerp buffer must be shifted backwards in time to their rightful place
// If the packet was already in use for interpolation, then some undesirable acceleration of interpolation happens
// To avoid this, for hitscan weapons, have at least 2 packets in the interp buffer at any given time. The 'newest' one can be shifted back in time to its rightful place without affecting what you're seeing on-screen
// For projectile weapons, this doesn't matter as much since projectiles are all server-side. Having 1 packet in the buffer is fine.
// Note that the flamethrower counts as a projectile here.

// "Sets the interpolation amount (bounded on low side by server interp ratio settings)."
// Value is in seconds
// Set to 0 to not have it not be a factor in final lerp calculation
cl_interp 0.1 // Don't use

// Handy aliases to put in your class configs
// Assume a jitter of 10ms max on any server you'll ever connect to (net_graph 4, check "var" to confirm), adjust if that's not true
// Remember that you might use lower cl_updaterate values if the server chokes (see above)
alias net_hitscan_66 "cl_interp_ratio 2.66; cl_interp 0.0403"
alias net_hitscan_40 "cl_interp_ratio 2.40; cl_interp 0.060"
alias net_hitscan_33 "cl_interp_ratio 2.33; cl_interp 0.0706"
alias net_hitscan_20 "cl_interp_ratio 2.20; cl_interp 0.110"

alias net_projectile_66 "cl_interp_ratio 1.66; cl_interp 0.0252"
alias net_projectile_40 "cl_interp_ratio 1.40; cl_interp 0.035"
alias net_projectile_33 "cl_interp_ratio 1.33; cl_interp 0.0403"
alias net_projectile_20 "cl_interp_ratio 1.20; cl_interp 0.060"

// "Sets the interpolation amount (final amount is cl_interp_ratio / cl_updaterate)."
// Use the aliases above
cl_interp_ratio 2.0

// ----------------------------------------------------------------------------
// Sprays
// ----------------------------------------------------------------------------
// Bear in mind that these are disabled on war servers due to `sv_pure 2'
// anyway, so if you play competitive TF2, this won't help you.
// ----------------------------------------------------------------------------

// Disable sprays
//cl_playerspraydisable 1
//r_spray_lifetime 0

// Enable sprays -- uncomment this section if you want these settings
cl_playerspraydisable 0
r_spray_lifetime 2

// ----------------------------------------------------------------------------
// Shadows
// ----------------------------------------------------------------------------

// Disable shadows
//mat_shadowstate 0
//r_shadowmaxrendered 0
//r_shadowrendertotexture 0
//r_shadows 0

// Enable shadows -- uncomment this section if you want these settings
mat_shadowstate 1
r_shadowmaxrendered 11
r_shadowrendertotexture 1 // Non-blobby shadows. Sometimes turned on by
                            // competitive TF2 players to see opponents standing
                            // near the other side of a wall. You may see some
                            // performance loss from setting this to `1'.
r_shadows 1

// ----------------------------------------------------------------------------
// Facial features
// ----------------------------------------------------------------------------

// Disable facial features
//r_eyes 0
//r_flex 0
//r_lod 2
//r_rootlod 2
//r_teeth 0

// Enable facial features -- uncomment this section if you want these settings
r_eyes 1
r_flex 1
r_lod 1 // Needs to be set to 1, otherwise they will still be disabled.
r_rootlod 1
r_teeth 1

// ----------------------------------------------------------------------------
// Ragdolls
// ----------------------------------------------------------------------------
// You will have reduced performance on deaths which produce ragdolls.
// ----------------------------------------------------------------------------

// Disable ragdolls
//cl_ragdoll_fade_time 0
//cl_ragdoll_forcefade 1
//cl_ragdoll_physics_enable 0
//g_ragdoll_fadespeed 0
//g_ragdoll_lvfadespeed 0
//ragdoll_sleepaftertime 0

// Enable ragdolls -- uncomment this section if you want these settings
cl_ragdoll_fade_time 15
cl_ragdoll_forcefade 0
cl_ragdoll_physics_enable 1
g_ragdoll_fadespeed 600
g_ragdoll_lvfadespeed 100
ragdoll_sleepaftertime "5.0f"

// ----------------------------------------------------------------------------
// Gibs
// ----------------------------------------------------------------------------
// You will have reduced performance on deaths which produce gibs.
// ----------------------------------------------------------------------------

// Disable gibs
//cl_phys_props_enable 0
//cl_phys_props_max 0
//props_break_max_pieces 0
//r_propsmaxdist 1
//violence_agibs 0
//violence_hgibs 0

// Enable gibs -- uncomment this section if you want these settings
cl_phys_props_enable 1
cl_phys_props_max 128
props_break_max_pieces -1
r_propsmaxdist 1000
violence_agibs 1
violence_hgibs 1

// ----------------------------------------------------------------------------
// Graphical
// ----------------------------------------------------------------------------
// Now we come to the main brunt of the config. You probably don't want to mess
// with this.
// ----------------------------------------------------------------------------
cl_burninggibs 1
cl_detaildist 1600
cl_detailfade 200
cl_maxrenderable_dist 8096
cl_new_impact_effects 1
cl_phys_props_max 1024
cl_ragdoll_collide 1
lod_transitiondist 6400
mat_aaquality 2
mat_antialias 8
mat_bumpmap 1
mat_compressedtextures 1
mat_envmapsize 512
mat_envmaptgasize 512
mat_forceaniso 16
mat_hdr_level 2
mat_disable_bloom 1
mat_monitorgamma 2.0 // Controls brightness, try 1.8 to make it brighter or 2.2
                     // to get it darker. Only works in fullscreen.
mat_motion_blur_enabled 0 // Disabled by default in v2.005 onwards
mat_motion_blur_forward_enabled 0
mat_motion_blur_strength 0
mat_parallaxmap 1
mat_picmip -1 // Higher = more mipmapping. Without `sv_cheats 1', you're looking
              // at a range from -1 to 2, -1 being the best quality, 2 being the
              // worst.
mat_phong 1
r_rimlight 1
mat_postprocess_x 8
mat_postprocess_y 8
mat_reducefillrate 0
mat_software_aa_blur_one_pixel_lines 0.5
mat_software_aa_edge_threshold 0.8
mat_software_aa_quality 2
mat_software_aa_strength 2
mat_software_aa_strength_vgui 2
mat_specular 1
mat_wateroverlaysize 512
mp_decals 4096
mp_usehwmmodels 1
mp_usehwmvcds 1
r_avglight 3
r_decals 4096
r_eyeglintlodpixels 4
r_lod 0
r_maxmodeldecal 4096
r_radiosity 3
r_rainradius 2250
r_rainsplashpercentage 100
r_rootlod 0
r_shadowmaxrendered 1024
r_shadowrendertotexture 1
r_shadows 1
r_waterdrawreflection 1
r_waterdrawrefraction 1
r_waterforceexpensive 1
r_waterforcereflectentities 1
tf_particles_disable_weather 0

// ----------------------------------------------------------------------------
// Misc
// ----------------------------------------------------------------------------
in_usekeyboardsampletime 0
mat_clipz 1 // FX card users should set this to 0
mat_forcehardwaresync 0
mat_levelflush 1
//m_rawinput 1 // Turn on raw mouse input. Commented out by default due to
               // silly incompatibility with the Xfire overlay. You should use
               // it if you can!
mat_vsync 0 // Turn off vsync to avoid nasty I/O latency.
r_fastzreject -1 // Values >1 enable a fast Z rejection algorithm, to be
                 // performed on the GPU (as opposed to on the CPU). The
                 // value `-1' autodetects hardware support for this
                 // feature.

// ----------------------------------------------------------------------------
// Sound
// ----------------------------------------------------------------------------
// I'd be hesitant to say that you would see a great deal of performance
// improvement from lowering the sound quality, but in my experience as a
// competitive TF2 player, lowering the sound quality makes determination of
// directionality and distance that much easier. You may see a small FPS gain
// with these settings, or you may not, either way will likely have a
// negligible effect on performance.
// ----------------------------------------------------------------------------
dsp_enhance_stereo 1
dsp_slow_cpu 0
snd_async_fullyasync 1 // Having the sound run fully asynchronous has been
                       // helpful in the past, as it seems to (for whatever
                       // reason) reduce the number of TDRs experienced during
                       // gameplay. There's some pretty good information on
                       // TDRs (nerds only) here:
                       // http://forums.nvidia.com/index.php?showtopic=65161
snd_pitchquality 1
snd_spatialize_roundrobin 0
snd_mixahead .04		// Sounds play quicker after having been called. Default
						// is .1

// ----------------------------------------------------------------------------
// Threading
// ----------------------------------------------------------------------------
mat_queue_mode 2 // mat_queue mode is another frequently asked about cvar, it
                 // defines the threading method to be used by the material
                 // system. It has been unstable to use in the past, but
                 // nowadays it's generally okay.
                 //
                 // Here are the possible values:
                 //     -2 legacy default
                 //     -1 default
                 //      0 synchronous single thread
                 //      1 queued single thread
                 //      2 queued multithreaded
                 //
                 // If you have problems with the value `2', try setting it to
                 // `-1'.
                 //
                 // As an aside, there are quite a few bugs in the demo system
                 // that occur when mat_queue_mode is set to a value that is
                 // not `-1'. If you intend to do work with the demo system,
                 // maybe you should change this.

cl_threaded_bone_setup 0
cl_threaded_client_leaf_system 0
r_queued_decals 0
r_queued_ropes 1
r_queued_post_processing 0
r_threaded_client_shadow_manager 1
r_threaded_particles 1
r_threaded_renderables 1

// ----------------------------------------------------------------------------
// Misc
// ----------------------------------------------------------------------------
cl_forcepreload 1 // Force preloading

// ----------------------------------------------------------------------------
// Print to console
// ----------------------------------------------------------------------------
echo "-------------------------------------------------------"
echo "           Chris' maxquality config loaded.           "
echo "-------------------------------------------------------"
echo "Please direct all comments/queries/whatnot to"
echo "#christf2 on QuakeNet."

// color toggler
alias dotxhaircolor "dotxhaircolorb"
alias dotxhaircolorb "cl_crosshair_blue 0; cl_crosshair_green 255; cl_crosshair_red 0;alias dotxhaircolor dotxhaircolorc"
alias dotxhaircolorc "cl_crosshair_blue 255; cl_crosshair_green 0; cl_crosshair_red 255;alias dotxhaircolor dotxhaircolord"
alias dotxhaircolord "cl_crosshair_blue 240; cl_crosshair_green 255; cl_crosshair_red 0;alias dotxhaircolor dotxhaircolorb"

// Null-cancelling movement script
// (prevents you from pressing two opposing directions, which causes you to stop moving)

bind w +mfwd
bind s +mback
bind a +mleft
bind d +mright

alias +mfwd "-back;+forward;alias checkfwd +forward;dotxhaircolor"
alias +mback "-forward;+back;alias checkback +back;dotxhaircolor"
alias +mleft "-moveright;+moveleft;alias checkleft +moveleft;dotxhaircolor"
alias +mright "-moveleft;+moveright;alias checkright +moveright;dotxhaircolor"
alias -mfwd "-forward;checkback;alias checkfwd none;dotxhaircolor"
alias -mback "-back;checkfwd;alias checkback none;dotxhaircolor"
alias -mleft "-moveleft;checkright;alias checkleft none;dotxhaircolor"
alias -mright "-moveright;checkleft;alias checkright none;dotxhaircolor"
alias checkfwd none
alias checkback none
alias checkleft none
alias checkright none
alias none ""

// Loadout Quickswitcher
alias loSF loA
alias loSB loE
alias loA "load_itempreset 0; alias loSF loB; alias loSB loe; play common/wpn_moveselect"
alias loB "load_itempreset 1; alias loSF loC; alias loSB loA; play common/wpn_moveselect"
alias loC "load_itempreset 2; alias loSF loD; alias loSB loB; play common/wpn_moveselect"
alias loD "load_itempreset 3; alias loSF loE; alias loSB loC; play common/wpn_moveselect"
alias loE "load_itempreset 4; alias loSF loA; alias loSB loD; play common/wpn_moveselect"
bind RIGHTARROW loSF
bind LEFTARROW loSB
//

bind e 			"voicemenu 0 0"
bind y 			"say"
bind u 			"say_team"
bind f 			"inspect"
bind g 			"+taunt"
bind i 			"showmapinfo"
bind v			"explode"
bind mouse3		"+use_action_slot_item"

sensitivity 14
viewmodel_fov 110
fov_desired 90
tf_hud_target_id_disable_floating_health 1
tf_hud_show_servertimelimit 1
cl_mute_all_comms 0
cl_new_impact_effects 0

alias Server2 "connect 70.42.74.33:27015"

// turns net_graph off when scoreboard is shown
alias "+ng" "+showscores; net_graph 0"
alias "-ng" "-showscores; net_graph 1"

bind "tab" "+ng"

net_graph 1
net_graphproportionalfont 0
net_graphheight 36

hud_combattext 1
hud_combattext_batching 1
hud_combattext_batching_window .3

tf_dingalingaling 1
tf_dingaling_volume 1
tf_dingaling_pitchmindmg 120
tf_dingaling_pitchmaxdmg 40

bind KP_PLUS "sv_cheats 1; incrementvar cl_drawhud 0 1 1; incrementvar r_drawviewmodel 0 1 1; incrementvar net_graph 0 1 1; noclip"
bind [ "incrementvar hud_saytext_time 0 12 12; incrementvar voice_enable 0 1 1"
bind ] "exec autoexec; hud_reloadscheme; record fix; stop; snd_restart; heartbeat"
bind ' "exec jump"
bindtoggle \ "noclip"